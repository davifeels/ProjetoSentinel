 {% extends "layout.html" %}
 
 {% block title %}Redefinir Credenciais | SentinelVision{% endblock %}
 
 {% block head_css %}
     <link rel="stylesheet" href="{{ url_for('static', filename='css/reset_password.css') }}">
 {% endblock %}
 
 {% block content %}
     <h1>Redefinir Credenciais do Usuário</h1>
     <p class="subtitle">Altere o nome de usuário e/ou a senha para o usuário: <strong>{{ user.username }}</strong></p>
 
     <div class="form-panel">
         <form method="POST" action="{{ url_for('reset_user_password', user_id=user.id) }}">
             <div class="form-group">
                 <label for="username">Nome de Usuário</label>
                 <input id="username" type="text" name="username" value="{{ user.username }}" required>
             </div>
 
             <div class="form-group">
                 <label for="new_password">Nova Senha *</label>
                 <input id="new_password" type="password" name="new_password" required minlength="6" placeholder="Mínimo de 6 caracteres" autocomplete="new-password"> {# ADICIONADO autocomplete="new-password" #}
             </div>
             
             <div class="form-group">
                 <label>Gerar Senha Aleatória</label>
                 <button type="button" id="generate-new-password-btn" class="generate-btn">
                     Gerar Senha
                 </button>
             </div>
 
             <div id="generated-password-display" class="credentials-display" style="display: none;">
                 </div>
 
             <div class="form-actions">
                 <a href="{{ url_for('manage_users') }}" class="cancel-button">Cancelar</a>
                 <button type="submit" class="save-button">Salvar Alterações</button>
             </div>
         </form>
     </div>
 {% endblock %}
 
 {% block scripts %}
 <script>
 document.addEventListener('DOMContentLoaded', function() {
     const generateBtn = document.getElementById('generate-new-password-btn');
     const passwordInput = document.getElementById('new_password');
     const displayDiv = document.getElementById('generated-password-display');
 
     function generateRandomString(length, chars) {
         let result = '';
         for (let i = 0; i < length; i++) {
             result += chars.charAt(Math.floor(Math.random() * chars.length));
         }
         return result;
     }
 
     function generateAndSetNewPassword() {
         const password = generateRandomString(12, 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*');
         
         passwordInput.value = password;
 
         displayDiv.innerHTML = `
             <div class="credential-item">
                 <strong>Nova Senha:</strong> <span>${password}</span>
             </div>
         `;
         displayDiv.style.display = 'block';
     }
 
     generateBtn.addEventListener('click', generateAndSetNewPassword);
 });
 </script>
 {% endblock %}
 